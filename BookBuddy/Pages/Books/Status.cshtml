@page
@model BookBuddy.Pages.Books.StatusModel

<div class="container mt-4">
    <h2>Spremeni status knjige</h2>

    <form method="post">
        <div class="mb-3">
            <label>Izberi knjigo:</label>
            <select asp-for="Id" class="form-control" onchange="this.form.submit()">
                <option value="">-- Izberi knjigo --</option>
                @foreach (var knjiga in Model.VseKnjige)
                {
                    <option value="@knjiga.Id">@knjiga.Naslov - @knjiga.Avtor</option>
                }
            </select>
        </div>
    </form>

    @if (Model.IzbranaKnjiga != null)
    {
        <div class="card mt-3">
            <div class="card-body">
                <h5 class="card-title">@Model.IzbranaKnjiga.Naslov</h5>
                <p class="card-text">
                    <strong>Avtor:</strong> @Model.IzbranaKnjiga.Avtor<br>
                    <strong>Žanr:</strong> @Model.IzbranaKnjiga.Zanr<br>
                    <strong>Trenutni status:</strong> @Model.IzbranaKnjiga.Status<br>
                    <strong>Ocena:</strong> @Model.IzbranaKnjiga.Rate/5
                </p>
            </div>
        </div>

        <form method="post">
            <input type="hidden" asp-for="Id" value="@Model.IzbranaKnjiga.Id" />

            <div class="mb-3 mt-3">
                <label>Nov status:</label>
                <select asp-for="Status" class="form-control">
                    <option value="Ni prebrana">Ni prebrana</option>
                    <option value="V branju">V branju</option>
                    <option value="Prebrana">Prebrana</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary">Shrani status</button>
        </form>
    }
    else if (Model.VseKnjige.Any())
    {
        <div class="alert alert-info mt-3">
            <p>Izberite knjigo iz spustnega seznama za spreminjanje statusa.</p>
        </div>
    }
    else
    {
        <div class="alert alert-warning mt-3">
            <p>Ni knjig na voljo. <a href="/Books/Add">Dodajte prvo knjigo</a></p>
        </div>
    }

    @if (Model.Sporocilo != null)
    {
        <div class="alert alert-success mt-3">@Model.Sporocilo</div>
    }
</div>

<p class="mt-3">
    <a href="/Books/List" class="btn btn-secondary">Nazaj na seznam knjig</a>
</p>